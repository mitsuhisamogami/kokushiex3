<div class='flex flex-wrap body-font'>
  <div class='w-full max-w-4xl m-auto'>
   <div data-controller="tab" class='mb-10 mt-5'>
      <div class="flex">
        <button data-action="tab#showYearTypes" class='bg-sky-100 text-black font-bold py-2 px-4 rounded'>
          模試形式
        </button>
        <button data-action="tab#showTagTypes" class='bg-purple-300 text-black font-bold py-2 px-4 rounded'>
          小テスト形式
        </button>
      </div>

      <!-- 年度選択 -->
      <div data-tab-target="year" class='w-full h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden shadow-xl'>
        <div class='m-5'>
          <div class='mt-3 flex items-center'>
            <%= image_tag 'calendar.png', size: 50 %>
            <h2 class='font-bold text-xl text-gray-900 ml-3'>年度から選択</h2>
          </div>

          <div class='mt-3 grid grid-cols-4 gap-3'>
            <% @tests.each do |test| %>
              <%= button_to "第#{test.turn}回（#{test.year}年度）", test_path(test.id),
                            class: 'bg-sky-100 text-gray-800 hover:bg-sky-500 font-bold
                            py-2 px-4 rounded-full shadow-xl text-center', method: :get %>
            <% end %>
          </div>
        </div>
      </div>
      <!-- タグ選択 -->
      <div data-tab-target="tag" class='hidden w-full h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden shadow-xl'>
        <div class='m-5'>
          <div class='mt-3 flex items-center'>
            <%= image_tag 'tag.png', size: 50 %>
            <h2 class='font-bold text-xl text-gray-900 ml-3'>タグから選択</h2>
          </div>

          <div class='mt-3'>
            <%= form_with url: tests_select_path, method: :get, local: false, data: { turbo: true } do |f| %>
              <div class='flex flex-wrap justify-start'>
                <% @major_categorys.each do |tag| %>
                  <div class='mt-3 mr-2 bg-amber-100 text-gray-800 font-bold
                              py-2 px-4 shadow-xl text-center'>
                    <%= check_box_tag 'tag_ids[]', tag.id, false, id: "tag_#{tag.id}" %>
                    <%= label_tag "tag_#{tag.id}", tag.name %>
                  </div>
                <% end %>
                <% @common_tags.each do |tag| %>
                  <div class='mt-3 mr-2 bg-green-100 text-gray-800 font-bold
                              py-2 px-4 shadow-xl text-center'>
                    <%= check_box_tag 'tag_ids[]', tag.id, false, id: "tag_#{tag.id}" %>
                    <%= label_tag "tag_#{tag.id}", tag.name %>
                  </div>
                <% end %>
                <% @special_tags.each do |tag| %>
                  <div class='mt-3 mr-2 bg-blue-100 text-gray-800 font-bold
                              py-2 px-4 shadow-xl text-center'>
                    <%= check_box_tag 'tag_ids[]', tag.id, false, id: "tag_#{tag.id}" %>
                    <%= label_tag "tag_#{tag.id}", tag.name %>
                  </div>
                <% end %>
                <div class='mt-3'>
                  <%= f.submit '検索', class: 'bg-blue-500 text-white rounded-lg py-2 px-4' %>
                  <%= link_to 'クリア', tests_select_path, class: 'bg-gray-300 text-black rounded-lg py-2 px-4 ml-2' %>
                </div>
              </div>
            <% end %>
            <div id="search-results" class="mt-3" data-turbo-action="replace">
              <%= @questions.count %>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
